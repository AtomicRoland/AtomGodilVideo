;
; Code equates
;
L004B      = $0080
L004C      = $0081
L004D      = $0082
L004F      = $0082

LD400      = $9DC0
LD401      = $9DC1
LD403      = $9DC3
LD404      = $9DC4
LD405      = $9DC5
LD407      = $9DC7
LD408      = $9DC8
LD40A      = $9DCA
LD40B      = $9DCB
LD40C      = $9DCC
LD40E      = $9DCE
LD40F      = $9DCF
LD411      = $9DD1
LD412      = $9DD2
LD413      = $9DD3
LD418      = $9DD8

;-------------------------------------------------
; Repton tune (The hustler)
;-------------------------------------------------
;
; Load $2580
; Init $2ee0 
; Play $0AF8
;
;-------------------------------------------------

.L2580
            EQUS $13,$3F,$09,$9F,$00,$00,$15,$9A
            EQUS $0A,$CD,$00,$00,$18,$3F,$0B,$72
            EQUS $00,$00,$19,$B1,$0C,$D8,$00,$00
            EQUS $00,$00,$00,$00,$00,$00,$14,$64
            EQUS $0A,$3C,$00,$00,$15,$9A,$0A,$CD
            EQUS $00,$00,$00,$00,$00,$00,$00,$00
            EQUS $12,$2A,$09,$15,$00,$00,$13,$3F
            EQUS $09,$9F,$00,$00,$00,$00,$00,$00
            EQUS $00,$00,$0F,$46,$00,$00,$07,$A3
            EQUS $10,$2F,$00,$00,$08,$17,$00,$00
            EQUS $00,$00,$00,$00,$0C,$20,$00,$00
            EQUS $06,$10,$0C,$D8,$00,$00,$06,$6C
            EQUS $0A,$CD,$00,$00,$05,$67,$09,$9F
            EQUS $00,$00,$04,$D0,$00,$00,$00,$00
            EQUS $00,$00,$00,$00,$00,$00,$00,$00
            EQUS $00,$00,$00,$00,$00,$00,$00,$00
            EQUS $00,$00,$00,$00,$13,$3F,$FF,$FF
            EQUS $FF,$FF,$00,$00,$FF,$FF,$FF,$FF
            EQUS $12,$2A,$FF,$FF,$FF,$FF,$00,$00
            EQUS $FF,$FF,$FF,$FF,$11,$25,$04,$D0
            EQUS $02,$67,$13,$3F,$00,$00,$00,$00
            EQUS $18,$3F,$08,$93,$06,$10,$11,$25
            EQUS $00,$00,$00,$00,$13,$3F,$03,$9B
            EQUS $01,$CD,$18,$3F,$00,$00,$00,$00
            EQUS $11,$25,$08,$93,$06,$10,$13,$3F
            EQUS $00,$00,$00,$00,$18,$3F,$04,$D0
            EQUS $02,$67,$11,$25,$00,$00,$00,$00
            EQUS $13,$3F,$05,$19,$02,$8B,$18,$3F
            EQUS $00,$00,$00,$00,$00,$00,$05,$67
            EQUS $02,$B2,$15,$9A,$00,$00,$00,$00
            EQUS $13,$3F,$06,$10,$02,$DC,$11,$25
            EQUS $00,$00,$00,$00,$0F,$46,$06,$6C
            EQUS $03,$35,$10,$2F,$00,$00,$00,$00
            EQUS $15,$9A,$08,$17,$04,$D0,$0F,$46
            EQUS $00,$00,$00,$00,$10,$2F,$04,$D0
            EQUS $02,$67,$15,$9A,$00,$00,$00,$00
            EQUS $0F,$46,$08,$17,$06,$6C,$10,$2F
            EQUS $00,$00,$00,$00,$15,$9A,$06,$6C
            EQUS $03,$35,$0F,$46,$00,$00,$00,$00
            EQUS $10,$2F,$06,$CE,$03,$66,$15,$9A
            EQUS $00,$00,$00,$00,$00,$00,$07,$35
            EQUS $03,$9B,$13,$3F,$00,$00,$00,$00
            EQUS $11,$25,$08,$17,$04,$0C,$10,$2F
            EQUS $00,$00,$00,$00,$15,$9A,$06,$CE
            EQUS $03,$66,$0A,$CC,$00,$00,$00,$00
            EQUS $0D,$9C,$09,$9F,$06,$CE,$15,$9A
            EQUS $00,$00,$00,$00,$00,$00,$05,$67
            EQUS $02,$B2,$13,$3F,$00,$00,$00,$00
            EQUS $11,$25,$09,$9F,$06,$CE,$10,$2F
            EQUS $00,$00,$00,$00,$0E,$6B,$07,$35
            EQUS $03,$9B,$0D,$9C,$00,$00,$00,$00
            EQUS $0E,$6B,$09,$15,$07,$35,$15,$9A
            EQUS $00,$00,$00,$00,$00,$00,$05,$67
            EQUS $02,$B2,$13,$3F,$00,$00,$00,$00
            EQUS $11,$25,$09,$15,$07,$35,$0E,$6B
            EQUS $00,$00,$00,$00,$10,$2F,$04,$D0
            EQUS $02,$67,$09,$9F,$00,$00,$00,$00
            EQUS $0C,$D8,$08,$17,$06,$CE,$10,$2F
            EQUS $00,$00,$00,$00,$00,$00,$04,$D0
            EQUS $02,$67,$0C,$D8,$00,$00,$00,$00
            EQUS $0E,$6B,$06,$10,$02,$DC,$00,$00
            EQUS $00,$00,$00,$00,$0C,$D8,$06,$6C
            EQUS $03,$35,$00,$00,$00,$00,$00,$00
            EQUS $00,$00,$00,$00,$00,$00,$00,$00
            EQUS $00,$00,$00,$00,$19,$B1,$03,$28
            EQUS $01,$9A,$00,$00,$00,$00,$00,$00
            EQUS $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
            EQUS $FF,$FF,$FF,$FF,$20,$5E,$FF,$FF
            EQUS $03,$35,$26,$7E,$FF,$FF,$00,$00
            EQUS $33,$46,$08,$17,$04,$D0,$19,$B1
            EQUS $00,$00,$00,$00,$20,$C2,$FF,$FF
            EQUS $02,$67,$26,$7E,$FF,$FF,$00,$00
            EQUS $13,$3F,$08,$17,$06,$6C,$19,$B1
            EQUS $00,$00,$00,$00,$20,$5E,$FF,$FF
            EQUS $03,$35,$10,$2F,$FF,$FF,$00,$00
            EQUS $13,$3F,$08,$17,$04,$D0,$19,$B1
            EQUS $00,$00,$00,$00,$0C,$D8,$FF,$FF
            EQUS $02,$67,$10,$2F,$FF,$FF,$00,$00
            EQUS $13,$3F,$08,$17,$06,$6C,$09,$9F
            EQUS $00,$00,$00,$00,$0C,$20,$08,$93
            EQUS $03,$9B,$00,$00,$00,$00,$00,$00
            EQUS $0B,$20,$FF,$FF,$07,$35,$0C,$20
            EQUS $08,$93,$00,$00,$00,$00,$00,$00
            EQUS $02,$67,$0B,$20,$FF,$FF,$00,$00
            EQUS $0C,$20,$08,$93,$07,$35,$00,$00
            EQUS $00,$00,$00,$00,$0C,$20,$08,$93
            EQUS $03,$9B,$0C,$D8,$FF,$FF,$00,$00
            EQUS $0D,$9C,$07,$35,$04,$D0,$0E,$6B
            EQUS $00,$00,$00,$00,$00,$00,$FF,$FF
            EQUS $02,$67,$0D,$9C,$FF,$FF,$00,$00
            EQUS $0E,$6B,$07,$35,$04,$D0,$00,$00
            EQUS $00,$00,$00,$00,$22,$4B,$FF,$FF
            EQUS $03,$9B,$26,$7E,$FF,$FF,$00,$00
            EQUS $30,$75,$08,$93,$04,$D0,$1C,$D6
            EQUS $00,$00,$00,$00,$22,$4B,$FF,$FF
            EQUS $02,$67,$26,$7E,$FF,$FF,$00,$00
            EQUS $18,$3F,$08,$93,$04,$D0,$1C,$D6
            EQUS $00,$00,$00,$00,$22,$4B,$FF,$FF
            EQUS $03,$9B,$13,$3F,$FF,$FF,$00,$00
            EQUS $18,$3F,$08,$93,$04,$D0,$1C,$D6
            EQUS $00,$00,$00,$00,$11,$25,$FF,$FF
            EQUS $02,$67,$13,$3F,$FF,$FF,$00,$00
            EQUS $18,$3F,$08,$93,$04,$D0,$0E,$6B
            EQUS $00,$00,$00,$00,$10,$2F,$09,$9F
            EQUS $03,$35,$00,$00,$00,$00,$00,$00
            EQUS $0F,$46,$FF,$FF,$08,$17,$10,$2F
            EQUS $09,$9F,$00,$00,$00,$00,$00,$00
            EQUS $02,$67,$0F,$46,$FF,$FF,$00,$00
            EQUS $10,$2F,$09,$9F,$08,$17,$00,$00
            EQUS $00,$00,$00,$00,$10,$2F,$09,$9F
            EQUS $03,$35,$11,$25,$FF,$FF,$00,$00
            EQUS $12,$2A,$08,$17,$04,$D0,$13,$3F
            EQUS $00,$00,$00,$00,$00,$00,$FF,$FF
            EQUS $02,$67,$12,$2A,$FF,$FF,$00,$00
            EQUS $13,$3F,$08,$17,$04,$D0,$00,$00
            EQUS $00,$00,$00,$00,$1B,$38,$FF,$FF
            EQUS $04,$0C,$20,$5E,$FF,$FF,$00,$00
            EQUS $26,$7E,$08,$17,$05,$67,$15,$9A
            EQUS $00,$00,$00,$00,$1B,$38,$FF,$FF
            EQUS $02,$B2,$20,$5E,$FF,$FF,$00,$00
            EQUS $13,$3F,$08,$17,$05,$67,$15,$9A
            EQUS $00,$00,$00,$00,$1B,$38,$FF,$FF
            EQUS $04,$0C,$10,$2F,$FF,$FF,$00,$00
            EQUS $13,$3F,$08,$17,$05,$67,$15,$9A
            EQUS $00,$00,$00,$00,$0D,$9C,$FF,$FF
            EQUS $02,$B2,$00,$00,$FF,$FF,$00,$00
            EQUS $00,$00,$08,$17,$05,$67,$00,$00
            EQUS $00,$00,$00,$00,$1C,$D6,$FF,$FF
            EQUS $03,$9B,$22,$4B,$FF,$FF,$00,$00
            EQUS $2B,$34,$08,$93,$05,$67,$15,$9A
            EQUS $00,$00,$00,$00,$1C,$D6,$FF,$FF
            EQUS $02,$B2,$22,$4B,$FF,$FF,$00,$00
            EQUS $11,$25,$08,$93,$05,$67,$15,$9A
            EQUS $00,$00,$00,$00,$1C,$D6,$FF,$FF
            EQUS $03,$9B,$0E,$6B,$FF,$FF,$00,$00
            EQUS $11,$25,$08,$93,$05,$67,$15,$9A
            EQUS $00,$00,$00,$00,$0A,$CD,$FF,$FF
            EQUS $03,$9B,$00,$00,$FF,$FF,$00,$00
            EQUS $00,$00,$08,$93,$05,$67,$00,$00
            EQUS $00,$00,$00,$00,$20,$5E,$08,$17
            EQUS $04,$D0,$26,$7E,$00,$00,$00,$00
            EQUS $33,$46,$FF,$FF,$FF,$FF,$19,$B1
            EQUS $FF,$FF,$FF,$FF,$20,$C2,$FF,$FF
            EQUS $FF,$FF,$26,$7E,$FF,$FF,$FF,$FF
            EQUS $13,$3F,$FF,$FF,$FF,$FF,$19,$B1
            EQUS $FF,$FF,$FF,$FF,$20,$5E,$FF,$FF
            EQUS $FF,$FF,$10,$2F,$FF,$FF,$FF,$FF
            EQUS $13,$3F,$FF,$FF,$FF,$FF,$19,$B1
            EQUS $FF,$FF,$FF,$FF,$0C,$D8,$FF,$FF
            EQUS $FF,$FF,$10,$2F,$FF,$FF,$FF,$FF
            EQUS $13,$3F,$FF,$FF,$FF,$FF,$0C,$D8
            EQUS $FF,$FF,$FF,$FF,$09,$9F,$04,$D0
            EQUS $FF,$FF,$03,$0C,$06,$10,$FF,$FF
            EQUS $0E,$6B,$07,$35,$FF,$FF,$13,$3F
            EQUS $09,$9F,$FF,$FF,$00,$00,$00,$00
            EQUS $FF,$FF,$11,$25,$08,$93,$FF,$FF
            EQUS $00,$00,$00,$00,$FF,$FF,$0E,$6B
            EQUS $07,$35,$FF,$FF,$0C,$D8,$06,$6C
            EQUS $FF,$FF,$00,$00,$00,$00,$FF,$FF
            EQUS $00,$00,$00,$00,$FF,$FF,$00,$00
            EQUS $00,$00,$FF,$FF,$13,$3F,$FF,$FF
            EQUS $FF,$FF,$00,$00,$FF,$FF,$FF,$FF
            EQUS $12,$2A,$FF,$FF,$FF,$FF,$00,$00
            EQUS $FF,$FF,$FF,$FF,$11,$25,$04,$D0
            EQUS $02,$67,$13,$3F,$00,$00,$00,$00
            EQUS $18,$3F,$08,$93,$06,$10,$11,$25
            EQUS $00,$00,$00,$00,$13,$3F,$03,$9B
            EQUS $01,$CD,$18,$3F,$00,$00,$00,$00
            EQUS $11,$25,$08,$93,$06,$10,$13,$3F
            EQUS $00,$00,$00,$00,$18,$3F,$04,$D0
            EQUS $02,$67,$11,$25,$00,$00,$00,$00
            EQUS $13,$3F,$05,$19,$02,$8B,$18,$3F
            EQUS $00,$00,$00,$00,$00,$00,$05,$67
            EQUS $02,$B2,$15,$9A,$00,$00,$00,$00
            EQUS $13,$3F,$06,$10,$02,$DC,$11,$25
            EQUS $00,$00,$00,$00,$0F,$46,$06,$6C
            EQUS $03,$35,$10,$2F,$00,$00,$00,$00
            EQUS $15,$9A,$08,$17,$04,$D0,$0F,$46
            EQUS $00,$00,$00,$00,$10,$2F,$04,$D0
            EQUS $02,$67,$15,$9A,$00,$00,$00,$00
            EQUS $0F,$46,$08,$17,$06,$6C,$10,$2F
            EQUS $00,$00,$00,$00,$15,$9A,$06,$6C
            EQUS $03,$35,$0F,$46,$00,$00,$00,$00
            EQUS $10,$2F,$06,$CE,$03,$66,$15,$9A
            EQUS $00,$00,$00,$00,$00,$00,$07,$35
            EQUS $03,$9B,$13,$3F,$00,$00,$00,$00
            EQUS $11,$25,$08,$17,$04,$0C,$10,$2F
            EQUS $00,$00,$00,$00,$11,$25,$07,$35
            EQUS $03,$99,$00,$00,$00,$00,$00,$00
            EQUS $10,$2F,$08,$93,$04,$D0,$11,$25
            EQUS $00,$00,$00,$00,$00,$00,$04,$D0
            EQUS $02,$17,$10,$2F,$00,$00,$00,$00
            EQUS $11,$25,$08,$93,$04,$D0,$00,$00
            EQUS $00,$00,$00,$00,$0E,$6B,$07,$35
            EQUS $03,$9B,$00,$00,$00,$00,$00,$00
            EQUS $0D,$9C,$08,$93,$04,$D0,$0E,$6B
            EQUS $00,$00,$00,$00,$00,$00,$04,$D0
            EQUS $02,$67,$0D,$9C,$00,$00,$00,$00
            EQUS $0E,$6B,$08,$93,$04,$D0,$00,$00
            EQUS $00,$00,$00,$00,$03,$99,$FF,$FF
            EQUS $FF,$FF,$03,$99,$FF,$FF,$FF,$FF
            EQUS $04,$0C,$FF,$FF,$FF,$FF,$04,$D0
            EQUS $FF,$FF,$FF,$FF,$06,$6C,$FF,$FF
            EQUS $FF,$FF,$06,$6C,$FF,$FF,$FF,$FF
            EQUS $08,$17,$FF,$FF,$FF,$FF,$09,$9F
            EQUS $FF,$FF,$FF,$FF,$0C,$D8,$FF,$FF
            EQUS $FF,$FF,$0C,$D8,$FF,$FF,$FF,$FF
            EQUS $10,$2F,$FF,$FF,$FF,$FF,$13,$3F
            EQUS $FF,$FF,$FF,$FF,$19,$B1,$FF,$FF
            EQUS $FF,$FF,$19,$B1,$FF,$FF,$FF,$FF
            EQUS $20,$5E,$FF,$FF,$FF,$FF,$26,$7E
            EQUS $FF,$FF,$FF,$FF,$11,$25,$04,$D0
            EQUS $02,$67,$13,$3F,$00,$00,$00,$00
            EQUS $18,$3F,$08,$93,$06,$10,$11,$25
            EQUS $00,$00,$00,$00,$13,$3F,$03,$9B
            EQUS $01,$CD,$18,$3F,$00,$00,$00,$00
            EQUS $11,$25,$08,$93,$06,$10,$13,$3F
            EQUS $00,$00,$00,$00,$18,$3F,$04,$D0
            EQUS $02,$67,$11,$25,$00,$00,$00,$00
            EQUS $13,$3F,$05,$19,$02,$8B,$18,$3F
            EQUS $00,$00,$00,$00,$00,$00,$05,$67
            EQUS $02,$B2,$15,$9A,$00,$00,$00,$00
            EQUS $13,$3F,$06,$10,$02,$DC,$11,$25
            EQUS $00,$00,$00,$00,$0F,$46,$06,$6C
            EQUS $03,$35,$10,$2F,$00,$00,$00,$00
            EQUS $15,$9A,$08,$17,$04,$D0,$0F,$46
            EQUS $00,$00,$00,$00,$10,$2F,$04,$D0
            EQUS $02,$67,$15,$9A,$00,$00,$00,$00
            EQUS $0F,$46,$08,$17,$06,$6C,$10,$2F
            EQUS $00,$00,$00,$00,$15,$9A,$06,$6C
            EQUS $03,$35,$0F,$46,$00,$00,$00,$00
            EQUS $10,$2F,$06,$CE,$03,$66,$15,$9A
            EQUS $00,$00,$00,$00,$00,$00,$07,$35
            EQUS $03,$9B,$13,$3F,$00,$00,$00,$00
            EQUS $11,$25,$08,$17,$04,$0C,$10,$2F
            EQUS $00,$00,$00,$00,$15,$9A,$06,$CE
            EQUS $03,$66,$0A,$CC,$00,$00,$00,$00
            EQUS $0D,$9C,$09,$9F,$06,$CE,$15,$9A
            EQUS $00,$00,$00,$00,$00,$00,$05,$67
            EQUS $02,$B2,$13,$3F,$00,$00,$00,$00
            EQUS $11,$25,$09,$9F,$06,$CE,$10,$2F
            EQUS $00,$00,$00,$00,$0E,$6B,$07,$35
            EQUS $03,$9B,$0D,$9C,$00,$00,$00,$00
            EQUS $0E,$6B,$09,$15,$07,$35,$15,$9A
            EQUS $00,$00,$00,$00,$00,$00,$05,$67
            EQUS $02,$B2,$13,$3F,$00,$00,$00,$00
            EQUS $11,$25,$09,$15,$07,$35,$0E,$6B
            EQUS $00,$00,$00,$00,$10,$2F,$04,$D0
            EQUS $02,$67,$09,$9F,$00,$00,$00,$00
            EQUS $0C,$D8,$08,$17,$06,$CE,$10,$2F
            EQUS $00,$00,$00,$00,$00,$00,$04,$D0
            EQUS $02,$67,$0C,$D8,$00,$00,$00,$00
            EQUS $0E,$6B,$06,$10,$02,$DC,$00,$00
            EQUS $00,$00,$00,$00,$0C,$D8,$06,$6C
            EQUS $03,$35,$00,$00,$00,$00,$00,$00
            EQUS $00,$00,$00,$00,$00,$00,$00,$00
            EQUS $00,$00,$00,$00,$19,$B1,$03,$28
            EQUS $01,$9A,$00,$00,$00,$00,$00,$00
            EQUS $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
            EQUS $FF,$FF,$FF,$FF,$FE,$FE,$FE,$FE

.L0AC0     ldy #$00               ; A0 00
            tya                    ; 98
.L2DA3     sta LD400,Y            ; 99 00 D4
            iny                    ; C8
            cpy #$24               ; C0 24
            bne L2DA3              ; D0 F8

            lda #$08               ; A9 08
            sta LD403              ; 8D 03 D4
            sta LD40A              ; 8D 0A D4
            sta LD411              ; 8D 11 D4

            lda #$09               ; A9 09
            sta LD405              ; 8D 05 D4
            sta LD40C              ; 8D 0C D4
            sta LD413              ; 8D 13 D4

            lda #$08               ; A9 08
            sta LD418              ; 8D 18 D4

            lda #<L2580            ; A9 80
            sta L004B              ; 85 4B
            lda #>L2580            ; A9 25
            sta L004C              ; 85 4C

            lda #$00               ; A9 00
            sta L3072              ; 8D 72 30
            sta L3075              ; 8D 75 30

            rts                    ; 60

;--------------------------------------------
; Play
;--------------------------------------------

.sid_play
            sty L3073              ; 8C 73 30
            stx L3074              ; 8E 74 30
            inc L3072              ; EE 72 30
            lda L3072              ; AD 72 30
            cmp #$04               ; C9 04
            beq L2DEB              ; F0 03
            jmp L0BDE              ; 4C DE 0B
.L2DEB     lda #$00               ; A9 00
            sta L3072              ; 8D 72 30
            tay                    ; A8
            lda L3075              ; AD 75 30
            beq L2E21              ; F0 2B
            lda (L004B),Y          ; B1 4B
            cmp #$00               ; C9 00
            beq L2E01              ; F0 05
            lda #$40               ; A9 40
            sta LD404              ; 8D 04 D4
.L2E01     lda (L004D),Y          ; B1 4D
            cmp #$00               ; C9 00
            beq L2E0C              ; F0 05
            lda #$40               ; A9 40
            sta LD40B              ; 8D 0B D4
.L2E0C     lda (L004F),Y          ; B1 4F
            cmp #$00               ; C9 00
            beq L2E17              ; F0 05
            lda #$40               ; A9 40
            sta LD412              ; 8D 12 D4
.L2E17     lda #$00               ; A9 00
            sta L3075              ; 8D 75 30
            lda #$FD               ; A9 FD
            jmp L0BE0              ; 4C E0 0B

.L2E21     lda #$01               ; A9 01
            sta L3075              ; 8D 75 30
            lda (L004B),Y          ; B1 4B
            bne L2E33              ; D0 09
            jsr L0BF7              ; 20 F7 0B
            jsr L0BF7              ; 20 F7 0B
            jmp L0B78              ; 4C 78 0B

.L2E33     cmp #$FE               ; C9 FE
            beq L2EB6              ; F0 7F
            tax                    ; AA
            lda #$40               ; A9 40
            sta LD404              ; 8D 04 D4
            jsr L0BF7              ; 20 F7 0B
            lda (L004B),Y          ; B1 4B
            jsr L0BF7              ; 20 F7 0B
            cmp #$00               ; C9 00
            beq L2E58              ; F0 0F
            cmp #$FF               ; C9 FF
            beq L2E58              ; F0 0B
            stx LD401              ; 8E 01 D4
            sta LD400              ; 8D 00 D4
            lda #$41               ; A9 41
            sta LD404              ; 8D 04 D4
.L2E58
.L0B78
            lda (L004B),Y          ; B1 4B
            bne L2E65              ; D0 09
            jsr L0BF7              ; 20 F7 0B
            jsr L0BF7              ; 20 F7 0B
            jmp L0BA6              ; 4C A6 0B

.L2E65     tax                    ; AA
            lda #$40               ; A9 40
            sta LD40B              ; 8D 0B D4
            jsr L0BF7              ; 20 F7 0B
            lda (L004B),Y          ; B1 4B
            jsr L0BF7              ; 20 F7 0B
            cmp #$00               ; C9 00
            beq L2E86              ; F0 0F
            cmp #$FF               ; C9 FF
            beq L2E86              ; F0 0B
            stx LD408              ; 8E 08 D4
            sta LD407              ; 8D 07 D4
            lda #$41               ; A9 41
            sta LD40B              ; 8D 0B D4
.L2E86
.L0BA6
            lda (L004B),Y          ; B1 4B
            bne L2E93              ; D0 09
            jsr L0BF7              ; 20 F7 0B
            jsr L0BF7              ; 20 F7 0B
            jmp L0BDE              ; 4C DE 0B

.L2E93     tax                    ; AA
            lda #$40               ; A9 40
            sta LD412              ; 8D 12 D4
            jsr L0BF7              ; 20 F7 0B
            lda (L004B),Y          ; B1 4B
            jsr L0BF7              ; 20 F7 0B
            cmp #$00               ; C9 00
            beq L2EBE              ; F0 19
            cmp #$FF               ; C9 FF
            beq L2EBE              ; F0 15
            stx LD40F              ; 8E 0F D4
            sta LD40E              ; 8D 0E D4
            lda #$41               ; A9 41
            sta LD412              ; 8D 12 D4
            bne L2EBE              ; D0 08

.L2EB6     lda #<L2580            ; A9 80
            sta L004B              ; 85 4B
            lda #>L2580            ; A9 25
            sta L004C              ; 85 4C
.L2EBE
.L0BDE
            nop                    ; EA
            nop                    ; EA
.L0BE0
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            nop                    ; EA
            ldy L3073              ; AC 73 30
            ldx L3074              ; AE 74 30
            rts                    ; 60
.L0BF7
            inc L004B              ; E6 4B
            bne L2EDD              ; D0 02
            inc L004C              ; E6 4C
.L2EDD     rts                    ; 60
            rts                    ; 60
            rts                    ; 60

;---------------------------------------------
; Init
;
; $2DA0-$2E9F -> $0AC0-$0BBF
; $2DE0-$2EDF -> $0B00-$0BFF

;---------------------------------------------

.sid_init
            jsr L0AC0              ; 20 C0 0A

            lda #$00               ; A9 00
            sta L3073              ; 8D 73 30
            sta L3074              ; 8D 74 30
            sta L3075              ; 8D 75 30
            sta L3072              ; 8D 72 30
            rts                    ; 60

.L3072     EQUS 0
.L3073     EQUS 0
.L3074     EQUS 0
.L3075     EQUS 0
